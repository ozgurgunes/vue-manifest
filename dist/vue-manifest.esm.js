import Vue from"vue";import BootstrapVue from"bootstrap-vue";import{mapGetters,mapState}from"vuex";import Cleave from"cleave.js";import axios from"axios";//
var script={name:"form-alert",computed:{...mapGetters("manifest",["errors"])}};function normalizeComponent(e,r,t,a,s,o/* server only */,i,n,l,d){"boolean"!=typeof i&&(l=n,n=i,i=!1);// Vue.extend constructor export interop.
var m="function"==typeof t?t.options:t;// render functions
e&&e.render&&(m.render=e.render,m.staticRenderFns=e.staticRenderFns,m._compiled=!0,s&&(m.functional=!0)),a&&(m._scopeId=a);var c;if(o?(c=function(e){e=e||// cached call
this.$vnode&&this.$vnode.ssrContext||// stateful
this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},m._ssrRegister=c):r&&(c=i?function(){r.call(this,d(this.$root.$options.shadowRoot))}:function(e){r.call(this,n(e))}),c)if(m.functional){// register for functional component in vue file
var p=m.render;m.render=function(e,r){return c.call(r),p(e,r)}}else{// inject component registration as beforeCreate hook
var u=m.beforeCreate;m.beforeCreate=u?[].concat(u,c):[c]}return t}var normalizeComponent_1=normalizeComponent;/* script */const __vue_script__=script;/* template */var __vue_render__=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[e._t("default",[e.errors&&e.errors.nonFieldErrors?t("b-alert",{attrs:{variant:"danger",show:""}},e._l(e.errors.nonFieldErrors,function(r,a){return t("div",{key:a},[e._v("\n        "+e._s(r)+"\n      ")])}),0):t("b-alert",{class:{"alert-warning":e.errors&&e.errors.length},attrs:{show:""}},[e._v("\n      Please fill all fields.\n    ")])])],2)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;/* style */const __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;/* scoped */ /* style inject */ /* style inject SSR */var FormAlert=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},void 0,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,void 0,void 0),FormMixin={data(){return{dispatch:null,redirect:null}},components:{FormAlert},computed:{...mapGetters("manifest",["errors"])},methods:{fieldError:e=>{if(e)return e.join(" ")},submitForm(){this.$store.dispatch(this.dispatch,this.form).then(()=>{!this.errors&&this.redirect&&this.$router.push(this.redirect)})}}},script$1={name:"login",mixins:[FormMixin],data(){return{form:{username:"",password:""},dispatch:"manifest/LOGIN",redirect:this.$route.query.next||{name:"profileSettings"}}}};/* script */const __vue_script__$1=script$1;/* template */var __vue_render__$1=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Login")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{attrs:{id:"loginForm"},on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Username or email","invalid-feedback":e.errors&&e.fieldError(e.errors.username)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.username},attrs:{type:"text",placeholder:"Enter your username or email"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Password","invalid-feedback":e.errors&&e.fieldError(e.errors.password)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.password},attrs:{type:"password",placeholder:"Enter your password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"login-button"}},[e._v("Login")])],1)],1),e._v(" "),t("p",[t("b-link",{attrs:{to:{name:"authRegister"}}},[e._v("create account")]),e._v("or\n        "),t("b-link",{attrs:{to:{name:"passwordReset"}}},[e._v("reset password")])],1)],1)],1)],1)},__vue_staticRenderFns__$1=[];__vue_render__$1._withStripped=!0;/* style */const __vue_inject_styles__$1=void 0,__vue_scope_id__$1=void 0,__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1;/* scoped */ /* style inject */ /* style inject SSR */var Login=normalizeComponent_1({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},void 0,__vue_script__$1,__vue_scope_id__$1,__vue_is_functional_template__$1,__vue_module_identifier__$1,void 0,void 0),script$2={name:"logout",created(){this.$store.dispatch("manifest/LOGOUT").then(()=>{this.$router.push({name:"homepage"})})}};//
//
//
//
//
//
//
//
//
/* script */const __vue_script__$2=script$2;/* template */var __vue_render__$2=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("h1",[e._v("Logged out")]),e._v(" "),t("p",[t("router-link",{attrs:{to:"/login"}},[e._v("Login back")])],1)])},__vue_staticRenderFns__$2=[];__vue_render__$2._withStripped=!0;/* style */const __vue_inject_styles__$2=void 0,__vue_scope_id__$2=void 0,__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1;/* scoped */ /* style inject */ /* style inject SSR */var Logout=normalizeComponent_1({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},void 0,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,void 0,void 0),script$3={name:"pictureUpload",mixins:[FormMixin],data(){return{picture:[],dispatch:"manifest/PICTURE_UPLOAD",redirect:{name:"profileSettings"}}},created(){this.getUser()},computed:{...mapState({profile:e=>e.manifest.profile})},methods:{getUser(){this.$store.dispatch("manifest/PROFILE_SETTINGS")},submitForm:function(){let e=new FormData;e.append("picture",this.picture),this.$store.dispatch(this.dispatch,e).then(()=>{!this.errors.length&&this.redirect&&this.$router.push(this.redirect)})}}};//
/* script */const __vue_script__$3=script$3;/* template */var __vue_render__$3=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"email-change-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Upload Profile Picture")]),e._v(" "),t("form-alert"),e._v(" "),t("img",{attrs:{src:e.profile.avatar,alt:""}}),e._v(" "),t("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Profile Picture",state:!!e.picture,"invalid-feedback":e.errors&&e.fieldError(e.errors.picture)},on:{submit:function(){return e.submitForm()}}},[t("b-form-file",{class:{"is-invalid":e.errors&&e.errors.picture},attrs:{name:"picture",state:e.errors&&e.errors.picture&&!!!e.errors.picture,placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.picture,callback:function(r){e.picture=r},expression:"picture"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"login-button"}},[e._v("Change email")])],1),e._v(" "),t("p",[e._v("\n          Back to\n          "),t("router-link",{attrs:{to:{name:"profileSettings"}}},[e._v("settings")]),e._v(".\n        ")],1)],1)],1)],1)],1)},__vue_staticRenderFns__$3=[];__vue_render__$3._withStripped=!0;/* style */const __vue_inject_styles__$3=void 0,__vue_scope_id__$3=void 0,__vue_module_identifier__$3=void 0,__vue_is_functional_template__$3=!1;/* scoped */ /* style inject */ /* style inject SSR */var PictureUpload=normalizeComponent_1({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},void 0,__vue_script__$3,__vue_scope_id__$3,__vue_is_functional_template__$3,__vue_module_identifier__$3,void 0,void 0),script$4={name:"emailChange",mixins:[FormMixin],data(){return{form:{email:""},dispatch:"manifest/EMAIL_CHANGE",redirect:{name:"profileSettings"}}}};//
/* script */const __vue_script__$4=script$4;/* template */var __vue_render__$4=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"email-change-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Change email adress")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Email","invalid-feedback":e.errors&&e.fieldError(e.errors.email)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.email},attrs:{type:"text",id:"email",placeholder:"Enter your email"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"login-button"}},[e._v("\n            Change email\n          ")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to\n        "),t("router-link",{attrs:{to:{name:"profileSettings"}}},[e._v("settings")]),e._v(".\n      ")],1)],1)],1)],1)},__vue_staticRenderFns__$4=[];__vue_render__$4._withStripped=!0;/* style */const __vue_inject_styles__$4=void 0,__vue_scope_id__$4=void 0,__vue_module_identifier__$4=void 0,__vue_is_functional_template__$4=!1;/* scoped */ /* style inject */ /* style inject SSR */var EmailChange=normalizeComponent_1({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},void 0,__vue_script__$4,__vue_scope_id__$4,__vue_is_functional_template__$4,__vue_module_identifier__$4,void 0,void 0),script$5={name:"verification-alert",computed:{...mapGetters("manifest",["errors"])}};//
/* script */const __vue_script__$5=script$5;/* template */var __vue_render__$5=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[e._t("default",[e.errors&&e.errors.nonFieldErrors?t("b-alert",{attrs:{variant:"danger",show:""}},e._l(e.errors.nonFieldErrors,function(r,a){return t("div",{key:a},[e._v("\n        "+e._s(r)+"\n      ")])}),0):t("b-alert",{class:{"alert-warning":e.errors&&e.errors.length},attrs:{show:""}},[e._v("Please enter token.")])])],2)},__vue_staticRenderFns__$5=[];__vue_render__$5._withStripped=!0;/* style */const __vue_inject_styles__$5=void 0,__vue_scope_id__$5=void 0,__vue_module_identifier__$5=void 0,__vue_is_functional_template__$5=!1;/* scoped */ /* style inject */ /* style inject SSR */var VerificationAlert=normalizeComponent_1({render:__vue_render__$5,staticRenderFns:__vue_staticRenderFns__$5},void 0,__vue_script__$5,__vue_scope_id__$5,__vue_is_functional_template__$5,__vue_module_identifier__$5,void 0,void 0),VerificationMixin={data(){return{dispatch:null,redirect:null}},components:{VerificationAlert},computed:{...mapGetters("manifest",["errors"])},created(){this.verification={username:this.$route.params.uid,token:this.$route.params.token},this.submitVerification()},methods:{fieldError:e=>{if(e)return e.join(" ")},submitVerification(){this.$store.dispatch(this.dispatch,this.verification).then(()=>{!this.errors&&this.redirect&&this.$router.push(this.redirect)})}}},script$6={name:"emailChangeConfirm",mixins:[VerificationMixin],data(){return{verification:{username:this.$route.params.uid,token:this.$route.params.token},dispatch:"manifest/EMAIL_CHANGE_CONFIRM"}}};/* script */const __vue_script__$6=script$6;/* template */var __vue_render__$6=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-alert",{attrs:{show:!!e.errors,variant:"danger"}},[e._v("Token is invalid.")]),e._v(" "),t("b-alert",{attrs:{show:!e.errors,variant:"success"}},[e._v("Email address changed.")])],1)},__vue_staticRenderFns__$6=[];__vue_render__$6._withStripped=!0;/* style */const __vue_inject_styles__$6=void 0,__vue_scope_id__$6=void 0,__vue_module_identifier__$6=void 0,__vue_is_functional_template__$6=!1;/* scoped */ /* style inject */ /* style inject SSR */var EmailChangeConfirm=normalizeComponent_1({render:__vue_render__$6,staticRenderFns:__vue_staticRenderFns__$6},void 0,__vue_script__$6,__vue_scope_id__$6,__vue_is_functional_template__$6,__vue_module_identifier__$6,void 0,void 0),script$7={name:"passwordReset",mixins:[FormMixin],data(){return{form:{email:""},dispatch:"manifest/PASSWORD_RESET",redirect:{name:"profileSettings"}}}};//
/* script */const __vue_script__$7=script$7;/* template */var __vue_render__$7=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Login")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Email","invalid-feedback":e.fieldError(e.errors&&e.errors.email)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.email},attrs:{type:"text",id:"email",placeholder:"Enter your email"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"login-button"}},[e._v("\n            Reset Password\n          ")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to "),t("router-link",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(".\n      ")],1)],1)],1)],1)},__vue_staticRenderFns__$7=[];__vue_render__$7._withStripped=!0;/* style */const __vue_inject_styles__$7=void 0,__vue_scope_id__$7=void 0,__vue_module_identifier__$7=void 0,__vue_is_functional_template__$7=!1;/* scoped */ /* style inject */ /* style inject SSR */var PasswordReset=normalizeComponent_1({render:__vue_render__$7,staticRenderFns:__vue_staticRenderFns__$7},void 0,__vue_script__$7,__vue_scope_id__$7,__vue_is_functional_template__$7,__vue_module_identifier__$7,void 0,void 0),script$8={name:"passwordChange",mixins:[FormMixin],data(){return{form:{oldPassword:"",newPassword1:"",newPassword2:""},dispatch:"manifest/PASSWORD_CHANGE",redirect:{name:"profileSettings"}}}};//
/* script */const __vue_script__$8=script$8;/* template */var __vue_render__$8=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Change Password")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Old Password","invalid-feedback":e.errors&&e.fieldError(e.errors.oldPassword)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.oldPassword},attrs:{type:"password",id:"old_password",placeholder:"Enter a password"},model:{value:e.form.oldPassword,callback:function(r){e.$set(e.form,"oldPassword",r)},expression:"form.oldPassword"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"New Password","invalid-feedback":e.errors&&e.fieldError(e.errors.newPassword1)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.newPassword1},attrs:{type:"password",id:"new_password1",placeholder:"Enter a password"},model:{value:e.form.newPassword1,callback:function(r){e.$set(e.form,"newPassword1",r)},expression:"form.newPassword1"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Confrim password","invalid-feedback":e.errors&&e.fieldError(e.errors.newPassword2)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.newPassword2},attrs:{type:"password",id:"new_password2",placeholder:"Enter password again"},model:{value:e.form.newPassword2,callback:function(r){e.$set(e.form,"newPassword2",r)},expression:"form.newPassword2"}})],1),e._v(" "),t("input",{attrs:{type:"hidden",name:"uid"},domProps:{value:e.form.uid}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"token"},domProps:{value:e.form.token}}),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"register-button"}},[e._v("\n            Set Password\n          ")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to "),t("router-link",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(".\n      ")],1)],1)],1)],1)},__vue_staticRenderFns__$8=[];__vue_render__$8._withStripped=!0;/* style */const __vue_inject_styles__$8=void 0,__vue_scope_id__$8=void 0,__vue_module_identifier__$8=void 0,__vue_is_functional_template__$8=!1;/* scoped */ /* style inject */ /* style inject SSR */var PasswordChange=normalizeComponent_1({render:__vue_render__$8,staticRenderFns:__vue_staticRenderFns__$8},void 0,__vue_script__$8,__vue_scope_id__$8,__vue_is_functional_template__$8,__vue_module_identifier__$8,void 0,void 0),script$9={name:"passwordResetConfirm",mixins:[FormMixin],data(){return{form:{uid:this.$route.params.uid,token:this.$route.params.token,newPassword1:"",newPassword2:""},verification:{uid:this.$route.params.uid,token:this.$route.params.token},dispatch:"manifest/PASSWORD_RESET_CONFIRM",redirect:{name:"profileSettings"}}},created(){this.submitVerification()},methods:{submitVerification(){this.$store.dispatch("manifest/PASSWORD_RESET_VERIFY",this.verification).catch(r=>console.error(r))}}};//
/* script */const __vue_script__$9=script$9;/* template */var __vue_render__$9=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[e.errors&&e.errors.token?t("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Token is invalid.")]):t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Reset Password")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Password","invalid-feedback":e.errors&&e.fieldError(e.errors.newPassword1)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.newPassword1},attrs:{type:"password",id:"password1",placeholder:"Enter a password"},model:{value:e.form.newPassword1,callback:function(r){e.$set(e.form,"newPassword1",r)},expression:"form.newPassword1"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Confirm password","invalid-feedback":e.errors&&e.fieldError(e.errors.newPassword2)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.newPassword2},attrs:{type:"password",id:"password2",placeholder:"Enter password again"},model:{value:e.form.newPassword2,callback:function(r){e.$set(e.form,"newPassword2",r)},expression:"form.newPassword2"}})],1),e._v(" "),t("input",{attrs:{type:"hidden",name:"uid"},domProps:{value:e.form.uid}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"token"},domProps:{value:e.form.token}}),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"register-button"}},[e._v("Set Password")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to\n        "),t("router-link",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(".\n      ")],1)],1)],1)],1)},__vue_staticRenderFns__$9=[];__vue_render__$9._withStripped=!0;/* style */const __vue_inject_styles__$9=void 0,__vue_scope_id__$9=void 0,__vue_module_identifier__$9=void 0,__vue_is_functional_template__$9=!1;/* scoped */ /* style inject */ /* style inject SSR */var PasswordResetConfirm=normalizeComponent_1({render:__vue_render__$9,staticRenderFns:__vue_staticRenderFns__$9},void 0,__vue_script__$9,__vue_scope_id__$9,__vue_is_functional_template__$9,__vue_module_identifier__$9,void 0,void 0),script$a={name:"profileSettings",computed:{...mapGetters("manifest",["user","status","message"])}};//
/* script */const __vue_script__$a=script$a;/* template */var __vue_render__$a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[e.message?t("b-alert",{attrs:{variant:e.status,show:""}},[e._v("\n    "+e._s(e.message)+"\n  ")]):e._e(),e._v(" "),t("b-row",[t("b-col",{attrs:{id:"login-view",cols:"8"}},[t("h1",{staticClass:"mb-3"},[e._v("Settings")]),e._v(" "),t("h4",[t("router-link",{attrs:{to:{name:"profileUpdate"}}},[e._v("Personal Information")])],1),e._v(" "),t("p",[e._v("Update your personal information. Let others know more about you.")]),e._v(" "),t("h4",[t("router-link",{attrs:{to:{name:"pictureUpload"}}},[e._v("Upload Profile Picture")])],1),e._v(" "),t("p",[e._v("You can change your profile picture.")]),e._v(" "),t("h4",[t("router-link",{attrs:{to:{name:"emailChange"}}},[e._v("Email Address")])],1),e._v(" "),t("p",[e._v("\n        You can change your email adress. ("),t("b",[e._v(e._s(e.user.email))]),e._v(")\n      ")]),e._v(" "),t("h4",[t("router-link",{attrs:{to:{name:"passwordChange"}}},[e._v("Password")])],1),e._v(" "),t("p",[e._v("\n        Change your password here. Please do not share your password with\n        others.\n      ")])])],1)],1)},__vue_staticRenderFns__$a=[];__vue_render__$a._withStripped=!0;/* style */const __vue_inject_styles__$a=void 0,__vue_scope_id__$a=void 0,__vue_module_identifier__$a=void 0,__vue_is_functional_template__$a=!1;/* scoped */ /* style inject */ /* style inject SSR */var ProfileSettings=normalizeComponent_1({render:__vue_render__$a,staticRenderFns:__vue_staticRenderFns__$a},void 0,__vue_script__$a,__vue_scope_id__$a,__vue_is_functional_template__$a,__vue_module_identifier__$a,void 0,void 0),script$b={name:"profileUpdate",mixins:[FormMixin],data(){return{dispatch:"manifest/PROFILE_UPDATE",redirect:{name:"profileSettings"}}},created(){this.getUser()},mounted(){let e=this.$refs.birthDateField.$el;new Cleave(e,{delimiter:"/",date:!0,datePattern:["d","m","Y"]})},computed:{...mapState({form:e=>e.manifest.profile,options:e=>e.manifest.options})},methods:{getUser(){this.$store.dispatch("manifest/PROFILE_SETTINGS").catch(r=>console.error(r)),this.$store.dispatch("manifest/PROFILE_OPTIONS").catch(r=>console.error(r))}}};//
/* script */const __vue_script__$b=script$b;/* template */var __vue_render__$b=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Update Profile")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"First Name","invalid-feedback":e.errors&&e.fieldError(e.errors.firstName)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.firstName},attrs:{type:"text",placeholder:"Enter your first name"},model:{value:e.form.firstName,callback:function(r){e.$set(e.form,"firstName",r)},expression:"form.firstName"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Last Name","invalid-feedback":e.errors&&e.fieldError(e.errors.lastName)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.lastName},attrs:{type:"text",placeholder:"Enter your last name"},model:{value:e.form.lastName,callback:function(r){e.$set(e.form,"lastName",r)},expression:"form.lastName"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Gender"}},[t("b-form-radio-group",{attrs:{options:e.options.gender},model:{value:e.form.gender,callback:function(r){e.$set(e.form,"gender",r)},expression:"form.gender"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Birth Date","invalid-feedback":e.errors&&e.fieldError(e.errors.birthDate)}},[t("b-input",{ref:"birthDateField",class:{"is-invalid":e.errors&&e.errors.birthDate},attrs:{placeholder:"DD/MM/YYYY"},model:{value:e.form.birthDate,callback:function(r){e.$set(e.form,"birthDate",r)},expression:"form.birthDate"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Time Zone","invalid-feedback":e.errors&&e.fieldError(e.errors.timezone)}},[t("b-form-select",{class:{"is-invalid":e.errors&&e.errors.timezone},attrs:{options:e.options.timezone},model:{value:e.form.timezone,callback:function(r){e.$set(e.form,"timezone",r)},expression:"form.timezone"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Locale","invalid-feedback":e.errors&&e.fieldError(e.errors.locale)}},[t("b-form-select",{class:{"is-invalid":e.errors&&e.errors.locale},attrs:{options:e.options.locale},model:{value:e.form.locale,callback:function(r){e.$set(e.form,"locale",r)},expression:"form.locale"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit"}},[e._v("Save")])],1)],1)],1)],1)],1)},__vue_staticRenderFns__$b=[];__vue_render__$b._withStripped=!0;/* style */const __vue_inject_styles__$b=void 0,__vue_scope_id__$b=void 0,__vue_module_identifier__$b=void 0,__vue_is_functional_template__$b=!1;/* scoped */ /* style inject */ /* style inject SSR */var ProfileUpdate=normalizeComponent_1({render:__vue_render__$b,staticRenderFns:__vue_staticRenderFns__$b},void 0,__vue_script__$b,__vue_scope_id__$b,__vue_is_functional_template__$b,__vue_module_identifier__$b,void 0,void 0),script$c={name:"register",mixins:[FormMixin],data(){return{form:{username:"",password1:"",password2:"",email:""},dispatch:"manifest/REGISTER"}},computed:{...mapGetters("manifest",["user"])}};//
/* script */const __vue_script__$c=script$c;/* template */var __vue_render__$c=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[e.user?t("b-row",[t("h2",[e._v("We just sent an email to "+e._s(e.user.email)+".")])]):e._e(),e._v(" "),e.user?e._e():t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Register")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Username","invalid-feedback":e.errors&&e.fieldError(e.errors.username)}},[t("b-form-input",{class:{"is-invalid":e.errors&&e.errors.username},attrs:{type:"text",placeholder:"Pick a username"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Email address","invalid-feedback":e.errors&&e.fieldError(e.errors.email)}},[t("b-form-input",{class:{"is-invalid":e.errors&&e.errors.email},attrs:{type:"email",placeholder:"Enter your email address"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Password","invalid-feedback":e.errors&&e.fieldError(e.errors.password1)}},[t("b-form-input",{class:{"is-invalid":e.errors&&e.errors.password1},attrs:{type:"password",placeholder:"Enter a password"},model:{value:e.form.password1,callback:function(r){e.$set(e.form,"password1",r)},expression:"form.password1"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Confirm password","invalid-feedback":e.errors&&e.fieldError(e.errors.password2)}},[t("b-form-input",{class:{"is-invalid":e.errors&&e.errors.password2},attrs:{type:"password",placeholder:"Enter password again"},model:{value:e.form.password2,callback:function(r){e.$set(e.form,"password2",r)},expression:"form.password2"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",variant:"primary"}},[e._v("Create Account")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to\n        "),t("b-link",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(".\n      ")],1)],1)],1)],1)},__vue_staticRenderFns__$c=[];__vue_render__$c._withStripped=!0;/* style */const __vue_inject_styles__$c=void 0,__vue_scope_id__$c=void 0,__vue_module_identifier__$c=void 0,__vue_is_functional_template__$c=!1;/* scoped */ /* style inject */ /* style inject SSR */var Register=normalizeComponent_1({render:__vue_render__$c,staticRenderFns:__vue_staticRenderFns__$c},void 0,__vue_script__$c,__vue_scope_id__$c,__vue_is_functional_template__$c,__vue_module_identifier__$c,void 0,void 0),script$d={name:"activate",mixins:[VerificationMixin],data(){return{verification:{username:this.$route.params.uid,token:this.$route.params.token},dispatch:"manifest/ACTIVATE"}}};//
/* script */const __vue_script__$d=script$d;/* template */var __vue_render__$d=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"activate-account-view"}},["loading"==e.status?t("h2",{staticClass:"text-center"},[e._v("\n    Activating account...\n  ")]):e.errors?t("h2",{staticClass:"text-center"},[e._v("An error occured.")]):t("h2",{staticClass:"text-center"},[e._v("Account activation successful.")])])},__vue_staticRenderFns__$d=[];__vue_render__$d._withStripped=!0;/* style */const __vue_inject_styles__$d=void 0,__vue_scope_id__$d=void 0,__vue_module_identifier__$d=void 0,__vue_is_functional_template__$d=!1;/* scoped */ /* style inject */ /* style inject SSR */var Activate=normalizeComponent_1({render:__vue_render__$d,staticRenderFns:__vue_staticRenderFns__$d},void 0,__vue_script__$d,__vue_scope_id__$d,__vue_is_functional_template__$d,__vue_module_identifier__$d,void 0,void 0),script$e={name:"userList",data(){return{}},mounted(){this.getUsers()},methods:{getUsers(){this.$store.dispatch("manifest/USER_LIST")}}};//
//
//
//
//
//
//
//
//
// import axios from 'axios'
/* script */const __vue_script__$e=script$e;/* template */var __vue_render__$e=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"profile"},[t("div",{staticClass:"container"},[t("h1",[e._v("Users")]),e._v(" "),t("p",[e._v(e._s(e.user_list))])])])},__vue_staticRenderFns__$e=[];__vue_render__$e._withStripped=!0;/* style */const __vue_inject_styles__$e=void 0,__vue_scope_id__$e=void 0,__vue_module_identifier__$e=void 0,__vue_is_functional_template__$e=!1;/* scoped */ /* style inject */ /* style inject SSR */var UserList=normalizeComponent_1({render:__vue_render__$e,staticRenderFns:__vue_staticRenderFns__$e},void 0,__vue_script__$e,__vue_scope_id__$e,__vue_is_functional_template__$e,__vue_module_identifier__$e,void 0,void 0),script$f={name:"userDetail",data(){return{}},mounted(){this.getUser()},methods:{getUser(){this.$store.dispatch("manifest/USER_DETAIL")}}};//
//
//
//
//
//
//
//
//
// import axios from 'axios'
/* script */const __vue_script__$f=script$f;/* template */var __vue_render__$f=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"profile"},[t("div",{staticClass:"container"},[t("h1",[e._v("User Profile")]),e._v(" "),t("p",[e._v(e._s(e.user_detail))])])])},__vue_staticRenderFns__$f=[];__vue_render__$f._withStripped=!0;/* style */const __vue_inject_styles__$f=void 0,__vue_scope_id__$f=void 0,__vue_module_identifier__$f=void 0,__vue_is_functional_template__$f=!1;/* scoped */ /* style inject */ /* style inject SSR */var UserDetail=normalizeComponent_1({render:__vue_render__$f,staticRenderFns:__vue_staticRenderFns__$f},void 0,__vue_script__$f,__vue_scope_id__$f,__vue_is_functional_template__$f,__vue_module_identifier__$f,void 0,void 0);const manifestGuard=(e,r)=>(e.beforeEach((e,t,a)=>{e.meta.auth?r.getters["manifest/authenticated"]?a():r.dispatch("manifest/AUTHENTICATE").then(()=>{r.getters["manifest/authenticated"]?a():a({name:"authLogin",query:{next:e.fullPath}})}):e.meta.guest?r.getters["manifest/authenticated"]?a({name:"homepage"}):r.dispatch("manifest/AUTHENTICATE").then(()=>{r.getters["manifest/authenticated"]?a({name:"homepage"}):a()}):a()}),e),base="/manifest";var router=[{path:base+"/login",name:"authLogin",component:Login,meta:{guest:!0}},{path:base+"/logout",name:"authLogout",component:Logout// beforeEnter: redirectLogout
},{path:base+"/register",name:"authRegister",component:Register,meta:{guest:!0}},{path:base+"/activate/:uid/:token",name:"authActivate",component:Activate},{path:base+"/password/reset",name:"passwordReset",component:PasswordReset},{path:base+"/password/reset/confirm/:uid/:token",name:"passwordResetConfirm",component:PasswordResetConfirm},{path:base+"/profile",name:"profileSettings",component:ProfileSettings,meta:{auth:!0}},{path:base+"/profile/update",name:"profileUpdate",component:ProfileUpdate,meta:{auth:!0}},{path:base+"/picture/upload",name:"pictureUpload",component:PictureUpload,meta:{auth:!0}},{path:base+"/email/change",name:"emailChange",component:EmailChange,meta:{auth:!0}},{path:base+"/email/change/confirm/:uid/:token",name:"emailChangeConfirm",component:EmailChangeConfirm},{path:base+"/password/change",name:"passwordChange",component:PasswordChange,meta:{auth:!0}},{path:base+"/users",name:"userList",component:UserList,meta:{auth:!0}},{path:base+"/users/:uid",name:"userDetail",component:UserDetail,meta:{auth:!0}}];//export const DEBUG = true
const BASE_URL="http://localhost:8000/",TIMEOUT=1e3,AUTH_TOKEN_KEY="auth-token",api=axios.create({baseURL:"http://localhost:8000/manifest",timeout:TIMEOUT,xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"});var service={async login(e,r){let t=await api.post("/jwt/obtain/",{username:e,password:r});return t.data},async refresh(e){let r=await api.post("/jwt/refresh/",{token:e});return r.data},async logout(){let e=await api.post("/logout/",{});return e.data},async register(e,r,t,a){let s=await api.post("/register/",{username:e,password1:r,password2:t,email:a});return s.data},async activate(e,r){let t=await api.post("/activate/",{username:e,token:r});return t.data},async passwordReset(e){let r=await api.post("/password/reset/",e);return r.data},async passwordResetVerify(e,r){let t=await api.post("/password/reset/verify/",{uid:e,token:r});return t.data},async passwordResetConfirm(e,r,t,a){let s=await api.post("/password/reset/confirm/",{uid:e,token:r,newPassword1:t,newPassword2:a});return s.data},async profileSettings(){let e=await api.get("/profile/");return e.data},async profileOptions(){let e=await api.get("/profile/options/");return e.data},async profileUpdate(e,r,t,a,s,o){let i=await api.put("/profile/",{firstName:e,lastName:r,gender:t,birthDate:a,timezone:s,locale:o});return i.data},async pictureUpload(e){let r=await api.post("/picture/upload/",e,{headers:{"Content-Type":"multipart/form-data"}});return r.data},async emailChange(e){let r=await api.post("/email/change/",e);return r.data},async emailChangeConfirm(e,r){let t=await api.post("/email/change/confirm/",{username:e,token:r});return t.data},passwordChange(e,r,t){return api.patch("/password/change/",{oldPassword:e,newPassword1:r,newPassword2:t})},async userList(){let e=await api.get("/users/");return e.data},async userDetail(e){let r=await api.get("/users/",{username:e});return r.data}};const handleError=e=>e.response&&e.response.data?e.response.data:e;var actions={async AUTHENTICATE({commit:e,state:r}){let t=localStorage.getItem(AUTH_TOKEN_KEY);return t&&!r.user.authenticated?(e("MANIFEST_BEGIN","Authenticating with token."),service.refresh(t).then(r=>e("AUTHENTICATE",r.token)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",handleError(r)),e("LOGOUT")})):void e("LOGOUT")},async LOGIN({commit:e},{username:r,password:t}){return e("MANIFEST_BEGIN","Authenticating with password."),service.login(r,t).then(r=>e("AUTHENTICATE",r.token)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async LOGOUT({commit:e}){return service.logout().then(()=>e("LOGOUT")).catch(r=>{e("MANIFEST_ERROR",handleError(r)),e("LOGOUT")})},async REGISTER({commit:e},{username:r,password1:t,password2:a,email:s}){return e("MANIFEST_BEGIN","Registering user account."),service.register(r,t,a,s).then(r=>e("REGISTER",r.user)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async ACTIVATE({commit:e},{username:r,token:t}){return e("MANIFEST_BEGIN","Activating user account."),service.activate(r,t).then(()=>e("MANIFEST_SUCCESS")).catch(r=>e("MANIFEST_ERROR",handleError(r)))},async PASSWORD_RESET({commit:e},r){return e("MANIFEST_BEGIN"),service.passwordReset(r).then(()=>e("MANIFEST_SUCCESS")).catch(r=>e("MANIFEST_ERROR",handleError(r)))},async PASSWORD_RESET_VERIFY({commit:e},{uid:r,token:t}){return e("MANIFEST_BEGIN"),service.passwordResetVerify(r,t).then(()=>e("MANIFEST_SUCCESS")).catch(r=>e("MANIFEST_ERROR",handleError(r)))},async PASSWORD_RESET_CONFIRM({commit:e},{uid:r,token:t,newPassword1:a,newPassword2:s}){return e("MANIFEST_BEGIN"),service.passwordResetConfirm(r,t,a,s).then(()=>e("MANIFEST_SUCCESS")).catch(r=>e("MANIFEST_ERROR",handleError(r)))},async PROFILE_SETTINGS({commit:e}){return e("MANIFEST_BEGIN"),service.profileSettings().then(r=>e("PROFILE_SETTINGS",r)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async PROFILE_OPTIONS({commit:e}){return e("MANIFEST_BEGIN"),service.profileOptions().then(r=>e("PROFILE_OPTIONS",r)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async PROFILE_UPDATE({commit:e},{firstName:r,lastName:t,gender:a,birthDate:s,timezone:o,locale:i}){return e("MANIFEST_BEGIN"),service.profileUpdate(r,t,a,s,o,i).then(()=>e("MANIFEST_SUCCESS","Profile updated")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async PICTURE_UPLOAD({commit:e},r){return e("MANIFEST_BEGIN"),service.pictureUpload(r).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async EMAIL_CHANGE({commit:e},r){return e("MANIFEST_BEGIN"),service.emailChange(r).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async EMAIL_CHANGE_CONFIRM({commit:e},{username:r,token:t}){return e("MANIFEST_BEGIN"),service.emailChangeConfirm(r,t).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async PASSWORD_CHANGE({commit:e},{oldPassword:r,newPassword1:t,newPassword2:a}){return e("MANIFEST_BEGIN"),service.passwordChange(r,t,a).then(()=>e("MANIFEST_SUCCESS","Password changed")).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async USER_LIST({commit:e}){return e("MANIFEST_BEGIN"),service.userList().then(r=>e("USER_LIST",r)).catch(r=>{e("MANIFEST_ERROR",handleError(r))})},async USER_DETAIL({commit:e},{username:r}){return e("MANIFEST_BEGIN"),service.userDetail(r).then(r=>e("USER_DETAIL",r)).catch(r=>{e("MANIFEST_ERROR",handleError(r))})}},mutations={MANIFEST_BEGIN(e,r){e.status="loading",e.message=r||"Loading",e.errors=null},MANIFEST_SUCCESS(e,r){e.status="success",e.message=r||"",e.errors=null},MANIFEST_ERROR(e,r,t){e.status="error",e.message=t||"Something went wrong. Sorry",e.errors=r},AUTHENTICATE(e,r){localStorage.setItem(AUTH_TOKEN_KEY,r),api.defaults.headers.Authorization=`JWT ${r}`,e.user=JSON.parse(atob(r.split(".")[1])),e.authenticated=!0},LOGOUT(e){localStorage.removeItem(AUTH_TOKEN_KEY),delete api.defaults.headers.Authorization,e.user=null,e.authenticated=!1,e.errors=null},REGISTER(e,r){e.user=r},PROFILE_SETTINGS(e,r){e.profile=r},PROFILE_OPTIONS(e,r){e.options=r},USER_LIST(e,r){e.userList=r},USER_DETAIL(e,r){e.userDetail=r}};const state={status:"loading",message:"Loading",errors:{},user:{},authenticated:!1,profile:{},options:{},userList:[],userDetail:{}},getters={status:e=>e.status,message:e=>e.message,errors:e=>e.errors,user:e=>e.user,profile:e=>e.profile,options:e=>e.options,authenticated:e=>e.authenticated,userList:e=>e.userList,userDetail:e=>e.userDetail,token:()=>localStorage.getItem(AUTH_TOKEN_KEY)};var index={namespaced:!0,state,getters,actions,mutations},script$g={name:"navbar-manifest",computed:mapGetters("manifest",["authenticated"])};//
/* script */const __vue_script__$g=script$g;/* template */var __vue_render__$g=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-navbar-nav",[e.authenticated?e._e():t("b-nav-item",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(" "),e.authenticated?e._e():t("b-nav-item",{attrs:{to:{name:"authRegister"}}},[e._v("register")]),e._v(" "),e.authenticated?t("b-nav-item",{attrs:{to:{name:"profileSettings"}}},[e._v("profile")]):e._e(),e._v(" "),e.authenticated?t("b-nav-item",{attrs:{to:{name:"authLogout"}}},[e._v("logout")]):e._e()],1)},__vue_staticRenderFns__$g=[];__vue_render__$g._withStripped=!0;/* style */const __vue_inject_styles__$g=void 0,__vue_scope_id__$g=void 0,__vue_module_identifier__$g=void 0,__vue_is_functional_template__$g=!1;/* scoped */ /* style inject */ /* style inject SSR */var Navbar=normalizeComponent_1({render:__vue_render__$g,staticRenderFns:__vue_staticRenderFns__$g},void 0,__vue_script__$g,__vue_scope_id__$g,__vue_is_functional_template__$g,__vue_module_identifier__$g,void 0,void 0);Vue.use(BootstrapVue);export{Activate,EmailChange,EmailChangeConfirm,FormAlert,FormMixin,Login,Logout,Navbar as NavbarManifest,PasswordChange,PasswordReset,PasswordResetConfirm,PictureUpload,ProfileSettings,ProfileUpdate,Register,UserDetail,UserList,VerificationAlert,VerificationMixin,manifestGuard,router as manifestRoutes,index as manifestStore};
