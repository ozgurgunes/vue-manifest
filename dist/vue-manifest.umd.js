(function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("vue"),require("bootstrap-vue"),require("vuex"),require("cleave.js"),require("axios")):"function"==typeof define&&define.amd?define(["exports","vue","bootstrap-vue","vuex","cleave.js","axios"],r):(e=e||self,r(e.manifest={},e.Vue,e.BootstrapVue,e.vuex,e.Cleave,e.axios))})(this,function(e,r,t,a,s,o){'use strict';r=r&&r.hasOwnProperty("default")?r["default"]:r,t=t&&t.hasOwnProperty("default")?t["default"]:t,s=s&&s.hasOwnProperty("default")?s["default"]:s,o=o&&o.hasOwnProperty("default")?o["default"]:o;//
var i={name:"form-alert",computed:{...a.mapGetters("manifest",["errors"])}},n=function(e,r,t,a,s,o/* server only */,i,n,l,d){"boolean"!=typeof i&&(l=n,n=i,i=!1);// Vue.extend constructor export interop.
var m="function"==typeof t?t.options:t;// render functions
e&&e.render&&(m.render=e.render,m.staticRenderFns=e.staticRenderFns,m._compiled=!0,s&&(m.functional=!0)),a&&(m._scopeId=a);var c;if(o?(c=function(e){e=e||// cached call
this.$vnode&&this.$vnode.ssrContext||// stateful
this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},m._ssrRegister=c):r&&(c=i?function(){r.call(this,d(this.$root.$options.shadowRoot))}:function(e){r.call(this,n(e))}),c)if(m.functional){// register for functional component in vue file
var p=m.render;m.render=function(e,r){return c.call(r),p(e,r)}}else{// inject component registration as beforeCreate hook
var u=m.beforeCreate;m.beforeCreate=u?[].concat(u,c):[c]}return t};/* template */var l=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[e._t("default",[e.errors&&e.errors.nonFieldErrors?t("b-alert",{attrs:{variant:"danger",show:""}},e._l(e.errors.nonFieldErrors,function(r,a){return t("div",{key:a},[e._v("\n        "+e._s(r)+"\n      ")])}),0):t("b-alert",{class:{"alert-warning":e.errors&&e.errors.length},attrs:{show:""}},[e._v("\n      Please fill all fields.\n    ")])])],2)};l._withStripped=!0;/* style inject */ /* style inject SSR */var d=n({render:l,staticRenderFns:[]},void 0,i,void 0,!1,void 0,void 0,void 0),m={data(){return{dispatch:null,redirect:null}},components:{FormAlert:d},computed:{...a.mapGetters("manifest",["errors"])},methods:{fieldError:e=>{if(e)return e.join(" ")},submitForm(){this.$store.dispatch(this.dispatch,this.form).then(()=>{!this.errors&&this.redirect&&this.$router.push(this.redirect)})}}},c={name:"login",mixins:[m],data(){return{form:{username:"",password:""},dispatch:"manifest/LOGIN",redirect:this.$route.query.next||{name:"profileSettings"}}}};/* template */var p=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Login")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{attrs:{id:"loginForm"},on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Username or email","invalid-feedback":e.errors&&e.fieldError(e.errors.username)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.username},attrs:{type:"text",placeholder:"Enter your username or email"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Password","invalid-feedback":e.errors&&e.fieldError(e.errors.password)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.password},attrs:{type:"password",placeholder:"Enter your password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"login-button"}},[e._v("Login")])],1)],1),e._v(" "),t("p",[t("b-link",{attrs:{to:{name:"authRegister"}}},[e._v("create account")]),e._v("or\n        "),t("b-link",{attrs:{to:{name:"passwordReset"}}},[e._v("reset password")])],1)],1)],1)],1)};p._withStripped=!0;/* style inject */ /* style inject SSR */var u=n({render:p,staticRenderFns:[]},void 0,c,void 0,!1,void 0,void 0,void 0),f={name:"logout",created(){this.$store.dispatch("manifest/LOGOUT").then(()=>{this.$router.push({name:"homepage"})})}};//
//
//
//
//
//
//
//
//
/* template */var _=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("h1",[e._v("Logged out")]),e._v(" "),t("p",[t("router-link",{attrs:{to:"/login"}},[e._v("Login back")])],1)])};_._withStripped=!0;/* style inject */ /* style inject SSR */var h=n({render:_,staticRenderFns:[]},void 0,f,void 0,!1,void 0,void 0,void 0),v={name:"pictureUpload",mixins:[m],data(){return{picture:[],dispatch:"manifest/PICTURE_UPLOAD",redirect:{name:"profileSettings"}}},created(){this.getUser()},computed:{...a.mapState({profile:e=>e.manifest.profile})},methods:{getUser(){this.$store.dispatch("manifest/PROFILE_SETTINGS")},submitForm:function(){let e=new FormData;e.append("picture",this.picture),this.$store.dispatch(this.dispatch,e).then(()=>{!this.errors.length&&this.redirect&&this.$router.push(this.redirect)})}}};//
/* template */var b=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"email-change-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Upload Profile Picture")]),e._v(" "),t("form-alert"),e._v(" "),t("img",{attrs:{src:e.profile.avatar,alt:""}}),e._v(" "),t("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Profile Picture",state:!!e.picture,"invalid-feedback":e.errors&&e.fieldError(e.errors.picture)},on:{submit:function(){return e.submitForm()}}},[t("b-form-file",{class:{"is-invalid":e.errors&&e.errors.picture},attrs:{name:"picture",state:e.errors&&e.errors.picture&&!!!e.errors.picture,placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.picture,callback:function(r){e.picture=r},expression:"picture"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"login-button"}},[e._v("Change email")])],1),e._v(" "),t("p",[e._v("\n          Back to\n          "),t("router-link",{attrs:{to:{name:"profileSettings"}}},[e._v("settings")]),e._v(".\n        ")],1)],1)],1)],1)],1)};b._withStripped=!0;/* style inject */ /* style inject SSR */var w=n({render:b,staticRenderFns:[]},void 0,v,void 0,!1,void 0,void 0,void 0),E={name:"emailChange",mixins:[m],data(){return{form:{email:""},dispatch:"manifest/EMAIL_CHANGE",redirect:{name:"profileSettings"}}}};//
/* template */var g=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"email-change-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Change email adress")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Email","invalid-feedback":e.errors&&e.fieldError(e.errors.email)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.email},attrs:{type:"text",id:"email",placeholder:"Enter your email"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"login-button"}},[e._v("\n            Change email\n          ")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to\n        "),t("router-link",{attrs:{to:{name:"profileSettings"}}},[e._v("settings")]),e._v(".\n      ")],1)],1)],1)],1)};g._withStripped=!0;/* style inject */ /* style inject SSR */var S=n({render:g,staticRenderFns:[]},void 0,E,void 0,!1,void 0,void 0,void 0),R={name:"verification-alert",computed:{...a.mapGetters("manifest",["errors"])}};//
/* template */var k=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[e._t("default",[e.errors&&e.errors.nonFieldErrors?t("b-alert",{attrs:{variant:"danger",show:""}},e._l(e.errors.nonFieldErrors,function(r,a){return t("div",{key:a},[e._v("\n        "+e._s(r)+"\n      ")])}),0):t("b-alert",{class:{"alert-warning":e.errors&&e.errors.length},attrs:{show:""}},[e._v("Please enter token.")])])],2)};k._withStripped=!0;/* style inject */ /* style inject SSR */var I=n({render:k,staticRenderFns:[]},void 0,R,void 0,!1,void 0,void 0,void 0),N={data(){return{dispatch:null,redirect:null}},components:{VerificationAlert:I},computed:{...a.mapGetters("manifest",["errors"])},created(){this.verification={username:this.$route.params.uid,token:this.$route.params.token},this.submitVerification()},methods:{fieldError:e=>{if(e)return e.join(" ")},submitVerification(){this.$store.dispatch(this.dispatch,this.verification).then(()=>{!this.errors&&this.redirect&&this.$router.push(this.redirect)})}}},P={name:"emailChangeConfirm",mixins:[N],data(){return{verification:{username:this.$route.params.uid,token:this.$route.params.token},dispatch:"manifest/EMAIL_CHANGE_CONFIRM"}}};/* template */var C=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-alert",{attrs:{show:!!e.errors,variant:"danger"}},[e._v("Token is invalid.")]),e._v(" "),t("b-alert",{attrs:{show:!e.errors,variant:"success"}},[e._v("Email address changed.")])],1)};C._withStripped=!0;/* style inject */ /* style inject SSR */var F=n({render:C,staticRenderFns:[]},void 0,P,void 0,!1,void 0,void 0,void 0),T={name:"passwordReset",mixins:[m],data(){return{form:{email:""},dispatch:"manifest/PASSWORD_RESET",redirect:{name:"profileSettings"}}}};//
/* template */var A=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Login")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Email","invalid-feedback":e.fieldError(e.errors&&e.errors.email)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.email},attrs:{type:"text",id:"email",placeholder:"Enter your email"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"login-button"}},[e._v("\n            Reset Password\n          ")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to "),t("router-link",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(".\n      ")],1)],1)],1)],1)};A._withStripped=!0;/* style inject */ /* style inject SSR */var $=n({render:A,staticRenderFns:[]},void 0,T,void 0,!1,void 0,void 0,void 0),M={name:"passwordChange",mixins:[m],data(){return{form:{oldPassword:"",newPassword1:"",newPassword2:""},dispatch:"manifest/PASSWORD_CHANGE",redirect:{name:"profileSettings"}}}};//
/* template */var y=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Change Password")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Old Password","invalid-feedback":e.errors&&e.fieldError(e.errors.oldPassword)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.oldPassword},attrs:{type:"password",id:"old_password",placeholder:"Enter a password"},model:{value:e.form.oldPassword,callback:function(r){e.$set(e.form,"oldPassword",r)},expression:"form.oldPassword"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"New Password","invalid-feedback":e.errors&&e.fieldError(e.errors.newPassword1)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.newPassword1},attrs:{type:"password",id:"new_password1",placeholder:"Enter a password"},model:{value:e.form.newPassword1,callback:function(r){e.$set(e.form,"newPassword1",r)},expression:"form.newPassword1"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Confrim password","invalid-feedback":e.errors&&e.fieldError(e.errors.newPassword2)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.newPassword2},attrs:{type:"password",id:"new_password2",placeholder:"Enter password again"},model:{value:e.form.newPassword2,callback:function(r){e.$set(e.form,"newPassword2",r)},expression:"form.newPassword2"}})],1),e._v(" "),t("input",{attrs:{type:"hidden",name:"uid"},domProps:{value:e.form.uid}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"token"},domProps:{value:e.form.token}}),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"register-button"}},[e._v("\n            Set Password\n          ")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to "),t("router-link",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(".\n      ")],1)],1)],1)],1)};y._withStripped=!0;/* style inject */ /* style inject SSR */var U=n({render:y,staticRenderFns:[]},void 0,M,void 0,!1,void 0,void 0,void 0),x={name:"passwordResetConfirm",mixins:[m],data(){return{form:{uid:this.$route.params.uid,token:this.$route.params.token,newPassword1:"",newPassword2:""},verification:{uid:this.$route.params.uid,token:this.$route.params.token},dispatch:"manifest/PASSWORD_RESET_CONFIRM",redirect:{name:"profileSettings"}}},created(){this.submitVerification()},methods:{submitVerification(){this.$store.dispatch("manifest/PASSWORD_RESET_VERIFY",this.verification).catch(r=>console.error(r))}}};//
/* template */var O=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[e.errors&&e.errors.token?t("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Token is invalid.")]):t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Reset Password")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Password","invalid-feedback":e.errors&&e.fieldError(e.errors.newPassword1)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.newPassword1},attrs:{type:"password",id:"password1",placeholder:"Enter a password"},model:{value:e.form.newPassword1,callback:function(r){e.$set(e.form,"newPassword1",r)},expression:"form.newPassword1"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Confirm password","invalid-feedback":e.errors&&e.fieldError(e.errors.newPassword2)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.newPassword2},attrs:{type:"password",id:"password2",placeholder:"Enter password again"},model:{value:e.form.newPassword2,callback:function(r){e.$set(e.form,"newPassword2",r)},expression:"form.newPassword2"}})],1),e._v(" "),t("input",{attrs:{type:"hidden",name:"uid"},domProps:{value:e.form.uid}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"token"},domProps:{value:e.form.token}}),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",id:"register-button"}},[e._v("Set Password")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to\n        "),t("router-link",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(".\n      ")],1)],1)],1)],1)};O._withStripped=!0;/* style inject */ /* style inject SSR */var L=n({render:O,staticRenderFns:[]},void 0,x,void 0,!1,void 0,void 0,void 0),G={name:"profileSettings",computed:{...a.mapGetters("manifest",["user","status","message"])}};//
/* template */var D=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[e.message?t("b-alert",{attrs:{variant:e.status,show:""}},[e._v("\n    "+e._s(e.message)+"\n  ")]):e._e(),e._v(" "),t("b-row",[t("b-col",{attrs:{id:"login-view",cols:"8"}},[t("h1",{staticClass:"mb-3"},[e._v("Settings")]),e._v(" "),t("h4",[t("router-link",{attrs:{to:{name:"profileUpdate"}}},[e._v("Personal Information")])],1),e._v(" "),t("p",[e._v("Update your personal information. Let others know more about you.")]),e._v(" "),t("h4",[t("router-link",{attrs:{to:{name:"pictureUpload"}}},[e._v("Upload Profile Picture")])],1),e._v(" "),t("p",[e._v("You can change your profile picture.")]),e._v(" "),t("h4",[t("router-link",{attrs:{to:{name:"emailChange"}}},[e._v("Email Address")])],1),e._v(" "),t("p",[e._v("\n        You can change your email adress. ("),t("b",[e._v(e._s(e.user.email))]),e._v(")\n      ")]),e._v(" "),t("h4",[t("router-link",{attrs:{to:{name:"passwordChange"}}},[e._v("Password")])],1),e._v(" "),t("p",[e._v("\n        Change your password here. Please do not share your password with\n        others.\n      ")])])],1)],1)};D._withStripped=!0;/* style inject */ /* style inject SSR */var B=n({render:D,staticRenderFns:[]},void 0,G,void 0,!1,void 0,void 0,void 0),z={name:"profileUpdate",mixins:[m],data(){return{dispatch:"manifest/PROFILE_UPDATE",redirect:{name:"profileSettings"}}},created(){this.getUser()},mounted(){let e=this.$refs.birthDateField.$el;new s(e,{delimiter:"/",date:!0,datePattern:["d","m","Y"]})},computed:{...a.mapState({form:e=>e.manifest.profile,options:e=>e.manifest.options})},methods:{getUser(){this.$store.dispatch("manifest/PROFILE_SETTINGS").catch(r=>console.error(r)),this.$store.dispatch("manifest/PROFILE_OPTIONS").catch(r=>console.error(r))}}};//
/* template */var V=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Update Profile")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"First Name","invalid-feedback":e.errors&&e.fieldError(e.errors.firstName)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.firstName},attrs:{type:"text",placeholder:"Enter your first name"},model:{value:e.form.firstName,callback:function(r){e.$set(e.form,"firstName",r)},expression:"form.firstName"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Last Name","invalid-feedback":e.errors&&e.fieldError(e.errors.lastName)}},[t("b-input",{class:{"is-invalid":e.errors&&e.errors.lastName},attrs:{type:"text",placeholder:"Enter your last name"},model:{value:e.form.lastName,callback:function(r){e.$set(e.form,"lastName",r)},expression:"form.lastName"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Gender"}},[t("b-form-radio-group",{attrs:{options:e.options.gender},model:{value:e.form.gender,callback:function(r){e.$set(e.form,"gender",r)},expression:"form.gender"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Birth Date","invalid-feedback":e.errors&&e.fieldError(e.errors.birthDate)}},[t("b-input",{ref:"birthDateField",class:{"is-invalid":e.errors&&e.errors.birthDate},attrs:{placeholder:"DD/MM/YYYY"},model:{value:e.form.birthDate,callback:function(r){e.$set(e.form,"birthDate",r)},expression:"form.birthDate"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Time Zone","invalid-feedback":e.errors&&e.fieldError(e.errors.timezone)}},[t("b-form-select",{class:{"is-invalid":e.errors&&e.errors.timezone},attrs:{options:e.options.timezone},model:{value:e.form.timezone,callback:function(r){e.$set(e.form,"timezone",r)},expression:"form.timezone"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Locale","invalid-feedback":e.errors&&e.fieldError(e.errors.locale)}},[t("b-form-select",{class:{"is-invalid":e.errors&&e.errors.locale},attrs:{options:e.options.locale},model:{value:e.form.locale,callback:function(r){e.$set(e.form,"locale",r)},expression:"form.locale"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit"}},[e._v("Save")])],1)],1)],1)],1)],1)};V._withStripped=!0;/* style inject */ /* style inject SSR */var j=n({render:V,staticRenderFns:[]},void 0,z,void 0,!1,void 0,void 0,void 0),H={name:"register",mixins:[m],data(){return{form:{username:"",password1:"",password2:"",email:""},dispatch:"manifest/REGISTER"}},computed:{...a.mapGetters("manifest",["user"])}};//
/* template */var Y=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-container",[e.user?t("b-row",[t("h2",[e._v("We just sent an email to "+e._s(e.user.email)+".")])]):e._e(),e._v(" "),e.user?e._e():t("b-row",[t("b-col",{attrs:{id:"login-view",offset:"4",cols:"4"}},[t("h1",{staticClass:"mb-3"},[e._v("Register")]),e._v(" "),t("form-alert"),e._v(" "),t("b-form",{on:{submit:[function(){return e.submitForm()},function(e){e.preventDefault()}]}},[t("b-form-group",{attrs:{label:"Username","invalid-feedback":e.errors&&e.fieldError(e.errors.username)}},[t("b-form-input",{class:{"is-invalid":e.errors&&e.errors.username},attrs:{type:"text",placeholder:"Pick a username"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Email address","invalid-feedback":e.errors&&e.fieldError(e.errors.email)}},[t("b-form-input",{class:{"is-invalid":e.errors&&e.errors.email},attrs:{type:"email",placeholder:"Enter your email address"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Password","invalid-feedback":e.errors&&e.fieldError(e.errors.password1)}},[t("b-form-input",{class:{"is-invalid":e.errors&&e.errors.password1},attrs:{type:"password",placeholder:"Enter a password"},model:{value:e.form.password1,callback:function(r){e.$set(e.form,"password1",r)},expression:"form.password1"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Confirm password","invalid-feedback":e.errors&&e.fieldError(e.errors.password2)}},[t("b-form-input",{class:{"is-invalid":e.errors&&e.errors.password2},attrs:{type:"password",placeholder:"Enter password again"},model:{value:e.form.password2,callback:function(r){e.$set(e.form,"password2",r)},expression:"form.password2"}})],1),e._v(" "),t("p",[t("b-button",{attrs:{block:"",type:"submit",variant:"primary"}},[e._v("Create Account")])],1)],1),e._v(" "),t("p",[e._v("\n        Back to\n        "),t("b-link",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(".\n      ")],1)],1)],1)],1)};Y._withStripped=!0;/* style inject */ /* style inject SSR */var W=n({render:Y,staticRenderFns:[]},void 0,H,void 0,!1,void 0,void 0,void 0),q={name:"activate",mixins:[N],data(){return{verification:{username:this.$route.params.uid,token:this.$route.params.token},dispatch:"manifest/ACTIVATE"}}};//
/* template */var X=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"activate-account-view"}},["loading"==e.status?t("h2",{staticClass:"text-center"},[e._v("\n    Activating account...\n  ")]):e.errors?t("h2",{staticClass:"text-center"},[e._v("An error occured.")]):t("h2",{staticClass:"text-center"},[e._v("Account activation successful.")])])};X._withStripped=!0;/* style inject */ /* style inject SSR */var Z=n({render:X,staticRenderFns:[]},void 0,q,void 0,!1,void 0,void 0,void 0),J={name:"userList",data(){return{}},mounted(){this.getUsers()},methods:{getUsers(){this.$store.dispatch("manifest/USER_LIST")}}};//
//
//
//
//
//
//
//
//
// import axios from 'axios'
/* template */var K=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"profile"},[t("div",{staticClass:"container"},[t("h1",[e._v("Users")]),e._v(" "),t("p",[e._v(e._s(e.user_list))])])])};K._withStripped=!0;/* style inject */ /* style inject SSR */var Q=n({render:K,staticRenderFns:[]},void 0,J,void 0,!1,void 0,void 0,void 0),ee={name:"userDetail",data(){return{}},mounted(){this.getUser()},methods:{getUser(){this.$store.dispatch("manifest/USER_DETAIL")}}};//
//
//
//
//
//
//
//
//
// import axios from 'axios'
/* template */var re=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"profile"},[t("div",{staticClass:"container"},[t("h1",[e._v("User Profile")]),e._v(" "),t("p",[e._v(e._s(e.user_detail))])])])};re._withStripped=!0;/* style inject */ /* style inject SSR */var te=n({render:re,staticRenderFns:[]},void 0,ee,void 0,!1,void 0,void 0,void 0);const ae="/manifest";//export const DEBUG = true
const se="auth-token",oe=o.create({baseURL:"http://localhost:8000/manifest",timeout:1e3,xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"});var ie={async login(e,r){let t=await oe.post("/jwt/obtain/",{username:e,password:r});return t.data},async refresh(e){let r=await oe.post("/jwt/refresh/",{token:e});return r.data},async logout(){let e=await oe.post("/logout/",{});return e.data},async register(e,r,t,a){let s=await oe.post("/register/",{username:e,password1:r,password2:t,email:a});return s.data},async activate(e,r){let t=await oe.post("/activate/",{username:e,token:r});return t.data},async passwordReset(e){let r=await oe.post("/password/reset/",e);return r.data},async passwordResetVerify(e,r){let t=await oe.post("/password/reset/verify/",{uid:e,token:r});return t.data},async passwordResetConfirm(e,r,t,a){let s=await oe.post("/password/reset/confirm/",{uid:e,token:r,newPassword1:t,newPassword2:a});return s.data},async profileSettings(){let e=await oe.get("/profile/");return e.data},async profileOptions(){let e=await oe.get("/profile/options/");return e.data},async profileUpdate(e,r,t,a,s,o){let i=await oe.put("/profile/",{firstName:e,lastName:r,gender:t,birthDate:a,timezone:s,locale:o});return i.data},async pictureUpload(e){let r=await oe.post("/picture/upload/",e,{headers:{"Content-Type":"multipart/form-data"}});return r.data},async emailChange(e){let r=await oe.post("/email/change/",e);return r.data},async emailChangeConfirm(e,r){let t=await oe.post("/email/change/confirm/",{username:e,token:r});return t.data},passwordChange(e,r,t){return oe.patch("/password/change/",{oldPassword:e,newPassword1:r,newPassword2:t})},async userList(){let e=await oe.get("/users/");return e.data},async userDetail(e){let r=await oe.get("/users/",{username:e});return r.data}};const ne=e=>e.response&&e.response.data?e.response.data:e;var le={async AUTHENTICATE({commit:e,state:r}){let t=localStorage.getItem(se);return t&&!r.user.authenticated?(e("MANIFEST_BEGIN","Authenticating with token."),ie.refresh(t).then(r=>e("AUTHENTICATE",r.token)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",ne(r)),e("LOGOUT")})):void e("LOGOUT")},async LOGIN({commit:e},{username:r,password:t}){return e("MANIFEST_BEGIN","Authenticating with password."),ie.login(r,t).then(r=>e("AUTHENTICATE",r.token)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async LOGOUT({commit:e}){return ie.logout().then(()=>e("LOGOUT")).catch(r=>{e("MANIFEST_ERROR",ne(r)),e("LOGOUT")})},async REGISTER({commit:e},{username:r,password1:t,password2:a,email:s}){return e("MANIFEST_BEGIN","Registering user account."),ie.register(r,t,a,s).then(r=>e("REGISTER",r.user)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async ACTIVATE({commit:e},{username:r,token:t}){return e("MANIFEST_BEGIN","Activating user account."),ie.activate(r,t).then(()=>e("MANIFEST_SUCCESS")).catch(r=>e("MANIFEST_ERROR",ne(r)))},async PASSWORD_RESET({commit:e},r){return e("MANIFEST_BEGIN"),ie.passwordReset(r).then(()=>e("MANIFEST_SUCCESS")).catch(r=>e("MANIFEST_ERROR",ne(r)))},async PASSWORD_RESET_VERIFY({commit:e},{uid:r,token:t}){return e("MANIFEST_BEGIN"),ie.passwordResetVerify(r,t).then(()=>e("MANIFEST_SUCCESS")).catch(r=>e("MANIFEST_ERROR",ne(r)))},async PASSWORD_RESET_CONFIRM({commit:e},{uid:r,token:t,newPassword1:a,newPassword2:s}){return e("MANIFEST_BEGIN"),ie.passwordResetConfirm(r,t,a,s).then(()=>e("MANIFEST_SUCCESS")).catch(r=>e("MANIFEST_ERROR",ne(r)))},async PROFILE_SETTINGS({commit:e}){return e("MANIFEST_BEGIN"),ie.profileSettings().then(r=>e("PROFILE_SETTINGS",r)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async PROFILE_OPTIONS({commit:e}){return e("MANIFEST_BEGIN"),ie.profileOptions().then(r=>e("PROFILE_OPTIONS",r)).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async PROFILE_UPDATE({commit:e},{firstName:r,lastName:t,gender:a,birthDate:s,timezone:o,locale:i}){return e("MANIFEST_BEGIN"),ie.profileUpdate(r,t,a,s,o,i).then(()=>e("MANIFEST_SUCCESS","Profile updated")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async PICTURE_UPLOAD({commit:e},r){return e("MANIFEST_BEGIN"),ie.pictureUpload(r).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async EMAIL_CHANGE({commit:e},r){return e("MANIFEST_BEGIN"),ie.emailChange(r).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async EMAIL_CHANGE_CONFIRM({commit:e},{username:r,token:t}){return e("MANIFEST_BEGIN"),ie.emailChangeConfirm(r,t).then(()=>e("MANIFEST_SUCCESS")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async PASSWORD_CHANGE({commit:e},{oldPassword:r,newPassword1:t,newPassword2:a}){return e("MANIFEST_BEGIN"),ie.passwordChange(r,t,a).then(()=>e("MANIFEST_SUCCESS","Password changed")).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async USER_LIST({commit:e}){return e("MANIFEST_BEGIN"),ie.userList().then(r=>e("USER_LIST",r)).catch(r=>{e("MANIFEST_ERROR",ne(r))})},async USER_DETAIL({commit:e},{username:r}){return e("MANIFEST_BEGIN"),ie.userDetail(r).then(r=>e("USER_DETAIL",r)).catch(r=>{e("MANIFEST_ERROR",ne(r))})}},de={MANIFEST_BEGIN(e,r){e.status="loading",e.message=r||"Loading",e.errors=null},MANIFEST_SUCCESS(e,r){e.status="success",e.message=r||"",e.errors=null},MANIFEST_ERROR(e,r,t){e.status="error",e.message=t||"Something went wrong. Sorry",e.errors=r},AUTHENTICATE(e,r){localStorage.setItem(se,r),oe.defaults.headers.Authorization=`JWT ${r}`,e.user=JSON.parse(atob(r.split(".")[1])),e.authenticated=!0},LOGOUT(e){localStorage.removeItem(se),delete oe.defaults.headers.Authorization,e.user=null,e.authenticated=!1,e.errors=null},REGISTER(e,r){e.user=r},PROFILE_SETTINGS(e,r){e.profile=r},PROFILE_OPTIONS(e,r){e.options=r},USER_LIST(e,r){e.userList=r},USER_DETAIL(e,r){e.userDetail=r}};var me={name:"navbar-manifest",computed:a.mapGetters("manifest",["authenticated"])};//
/* template */var ce=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-navbar-nav",[e.authenticated?e._e():t("b-nav-item",{attrs:{to:{name:"authLogin"}}},[e._v("login")]),e._v(" "),e.authenticated?e._e():t("b-nav-item",{attrs:{to:{name:"authRegister"}}},[e._v("register")]),e._v(" "),e.authenticated?t("b-nav-item",{attrs:{to:{name:"profileSettings"}}},[e._v("profile")]):e._e(),e._v(" "),e.authenticated?t("b-nav-item",{attrs:{to:{name:"authLogout"}}},[e._v("logout")]):e._e()],1)};ce._withStripped=!0;/* style inject */ /* style inject SSR */var pe=n({render:ce,staticRenderFns:[]},void 0,me,void 0,!1,void 0,void 0,void 0);r.use(t),e.Activate=Z,e.EmailChange=S,e.EmailChangeConfirm=F,e.FormAlert=d,e.FormMixin=m,e.Login=u,e.Logout=h,e.NavbarManifest=pe,e.PasswordChange=U,e.PasswordReset=$,e.PasswordResetConfirm=L,e.PictureUpload=w,e.ProfileSettings=B,e.ProfileUpdate=j,e.Register=W,e.UserDetail=te,e.UserList=Q,e.VerificationAlert=I,e.VerificationMixin=N,e.manifestGuard=(e,r)=>(e.beforeEach((e,t,a)=>{e.meta.auth?r.getters["manifest/authenticated"]?a():r.dispatch("manifest/AUTHENTICATE").then(()=>{r.getters["manifest/authenticated"]?a():a({name:"authLogin",query:{next:e.fullPath}})}):e.meta.guest?r.getters["manifest/authenticated"]?a({name:"homepage"}):r.dispatch("manifest/AUTHENTICATE").then(()=>{r.getters["manifest/authenticated"]?a({name:"homepage"}):a()}):a()}),e),e.manifestRoutes=[{path:ae+"/login",name:"authLogin",component:u,meta:{guest:!0}},{path:ae+"/logout",name:"authLogout",component:h// beforeEnter: redirectLogout
},{path:ae+"/register",name:"authRegister",component:W,meta:{guest:!0}},{path:ae+"/activate/:uid/:token",name:"authActivate",component:Z},{path:ae+"/password/reset",name:"passwordReset",component:$},{path:ae+"/password/reset/confirm/:uid/:token",name:"passwordResetConfirm",component:L},{path:ae+"/profile",name:"profileSettings",component:B,meta:{auth:!0}},{path:ae+"/profile/update",name:"profileUpdate",component:j,meta:{auth:!0}},{path:ae+"/picture/upload",name:"pictureUpload",component:w,meta:{auth:!0}},{path:ae+"/email/change",name:"emailChange",component:S,meta:{auth:!0}},{path:ae+"/email/change/confirm/:uid/:token",name:"emailChangeConfirm",component:F},{path:ae+"/password/change",name:"passwordChange",component:U,meta:{auth:!0}},{path:ae+"/users",name:"userList",component:Q,meta:{auth:!0}},{path:ae+"/users/:uid",name:"userDetail",component:te,meta:{auth:!0}}],e.manifestStore={namespaced:!0,state:{status:"loading",message:"Loading",errors:{},user:{},authenticated:!1,profile:{},options:{},userList:[],userDetail:{}},getters:{status:e=>e.status,message:e=>e.message,errors:e=>e.errors,user:e=>e.user,profile:e=>e.profile,options:e=>e.options,authenticated:e=>e.authenticated,userList:e=>e.userList,userDetail:e=>e.userDetail,token:()=>localStorage.getItem(se)},actions:le,mutations:de},Object.defineProperty(e,"__esModule",{value:!0})});
